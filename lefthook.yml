pre-commit:
  commands:
    biome-format:
      glob: "*.{js,ts,cjs,mjs,d.cts,d.mts,json,jsonc,jsx,tsx}"
      # Format only staged files
      run: pnpm format --files-ignore-unknown=true --no-errors-on-unmatched {staged_files}

    biome-lint:
      glob: "*.{js,ts,cjs,mjs,d.cts,d.mts,json,jsonc,jsx,tsx}"
      # Lint only staged files
      run: pnpm lint --files-ignore-unknown=true --no-errors-on-unmatched {staged_files}

pre-push:
  commands:
    branch-name:
      run: |
        BRANCH_NAME="$(git rev-parse --abbrev-ref HEAD)"
        if ! echo "$BRANCH_NAME" | grep -Eq '^(main|development|staging|feature/.+|bugfix/.+|hotfix/.+)$'; then
          echo "‚ùå Invalid branch name: '$BRANCH_NAME'"
          echo "Branches must be one of:"
          echo "  main"
          echo "  development"
          echo "  staging"
          echo "  feature/<name>"
          echo "  bugfix/<name>"
          echo "  hotfix/<name>"
          exit 1
        fi

    biome-check:
      glob: "*.{js,ts,tsx,cjs,mjs,d.cts,d.mts,jsx,tsx,json,jsonc}"
      exclude:
        - "coverage/**"
        - "dist/**"
      run: pnpm exec biome check . --files-ignore-unknown=true --no-errors-on-unmatched --colors=off

commit-msg:
  commands:
    commitlint:
      run: pnpm exec commitlint --edit {1}
